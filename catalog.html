<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catalog ‚Äî Reschevie</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>

<nav class="navbar scrolled" id="navbar">
  <div class="nav-inner">
    <a href="index.html" class="logo"><span class="logo-r">R</span>eschevie</a>
    <ul class="nav-links">
      <li><a href="catalog.html" style="color:var(--gold)">Catalog</a></li>
      <li><a href="catalog.html#curations">Curations</a></li>
      <li><a href="index.html#about">Our Story</a></li>
      <li><a href="index.html#stories">Client Stories</a></li>
    </ul>
    <div class="nav-actions">
      <a href="inquiry.html" class="nav-icon" title="Inquiry List">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
        <span class="badge" id="cart-badge">0</span>
      </a>
      <div id="auth-links"></div>
    </div>
  </div>
</nav>

<div class="page-header">
  <span class="section-tag">Global Curations</span>
  <h1>The Collection</h1>
  <p>Discover fine gold and diamond jewelry from the world's premier artisan traditions</p>
</div>

<!-- Filters -->
<div class="filters-bar">
  <div class="filters-inner">
    <div class="filter-group">
      <span class="filter-label">Type:</span>
      <button class="filter-btn active" data-filter-type="all">All</button>
      <button class="filter-btn" data-filter-type="ring">Rings</button>
      <button class="filter-btn" data-filter-type="necklace">Necklaces</button>
      <button class="filter-btn" data-filter-type="earring">Earrings</button>
      <button class="filter-btn" data-filter-type="bracelet">Bracelets</button>
    </div>
    <div class="filter-group">
      <span class="filter-label">Origin:</span>
      <button class="filter-btn active" data-filter-origin="all">All</button>
      <button class="filter-btn" data-filter-origin="Japan">Japan</button>
      <button class="filter-btn" data-filter-origin="Italy">Italy</button>
      <button class="filter-btn" data-filter-origin="Saudi Arabia">Saudi Arabia</button>
      <button class="filter-btn" data-filter-origin="Hong Kong">Hong Kong</button>
    </div>
    <div class="filter-group">
      <span class="filter-label">Status:</span>
      <button class="filter-btn active" data-filter-status="all">All</button>
      <button class="filter-btn" data-filter-status="available">Available</button>
    </div>
    <span class="filter-count" id="filter-count"></span>
  </div>
</div>

<!-- Products -->
<section style="padding:60px 48px;">
  <div class="products-grid" id="catalog-grid" style="max-width:1400px; margin:0 auto;"></div>
  <div id="no-results" class="empty-state" style="display:none;">
    <div class="empty-icon">üîç</div>
    <h3>No pieces found</h3>
    <p>Try adjusting your filters</p>
  </div>
</section>

<!-- Reuse modals from main -->
<footer class="footer" style="margin-top:0;">
  <div class="footer-inner" style="max-width:1400px; margin:0 auto; display:flex; gap:24px; padding-bottom:40px; flex-wrap:wrap;">
    <div><a href="index.html" class="logo" style="font-family:var(--font-serif);font-size:22px;"><span class="logo-r">R</span>eschevie</a></div>
    <div style="margin-left:auto; font-size:12px; color:var(--gray-light);">¬© 2026 Reschevie. Imus, Cavite, Philippines.</div>
  </div>
</footer>

<script src="js/data.js"></script>
<script src="js/main.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // Auth nav
  const session = getSession();
  const authDiv = document.getElementById('auth-links');
  if (session) {
    authDiv.innerHTML = `<span style="font-size:12px;color:var(--gold);padding:8px 12px;">Hello, ${session.fname}</span>
    <button class="btn-ghost" onclick="clearSession();location.href='index.html'">Sign Out</button>`;
  } else {
    authDiv.innerHTML = `<a href="login.html" class="btn-ghost">Sign In</a><a href="register.html" class="btn-gold">Join</a>`;
  }

  // Cart badge
  document.getElementById('cart-badge').textContent = getCart().length;

  let filterType = 'all', filterOrigin = 'all', filterStatus = 'all';

  // Parse URL params
  const params = new URLSearchParams(window.location.search);
  if (params.get('origin')) filterOrigin = params.get('origin');
  if (params.get('type')) filterType = params.get('type');

  async function renderCatalog() {
    let products = await getProducts();
    if (filterType !== 'all') products = products.filter(p => (p.product_type ?? p.type) === filterType);
    if (filterOrigin !== 'all') products = products.filter(p => (p.product_origin ?? p.origin) === filterOrigin);
    if (filterStatus !== 'all') products = products.filter(p => (p.product_status ?? p.status) === filterStatus);

    const grid = document.getElementById('catalog-grid');
    const noRes = document.getElementById('no-results');
    document.getElementById('filter-count').textContent = `${products.length} piece${products.length !== 1 ? 's' : ''}`;

    if (products.length === 0) {
      grid.innerHTML = '';
      noRes.style.display = 'block';
    } else {
      noRes.style.display = 'none';
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
      attachProductCardEvents();
    }
  }

  // Sync active states for URL params
  document.querySelectorAll('[data-filter-origin]').forEach(btn => {
    if (btn.dataset.filterOrigin === filterOrigin) {
      btn.closest('.filter-group').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }
  });

  // Filter click handlers
  document.querySelectorAll('[data-filter-type]').forEach(btn => {
    if (btn.dataset.filterType === filterType) {
      btn.closest('.filter-group').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }
    btn.addEventListener('click', () => {
      btn.closest('.filter-group').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      filterType = btn.dataset.filterType;
      renderCatalog();
    });
  });
  document.querySelectorAll('[data-filter-origin]').forEach(btn => {
    btn.addEventListener('click', () => {
      btn.closest('.filter-group').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      filterOrigin = btn.dataset.filterOrigin;
      renderCatalog();
    });
  });
  document.querySelectorAll('[data-filter-status]').forEach(btn => {
    btn.addEventListener('click', () => {
      btn.closest('.filter-group').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      filterStatus = btn.dataset.filterStatus;
      renderCatalog();
    });
  });

  renderCatalog();
});
</script>
</body>
</html>
